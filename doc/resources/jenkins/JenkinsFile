  
node {
 withEnv(['AZURE_SUBSCRIPTION_ID=<subscription_id>',
        'AZURE_TENANT_ID=<tenant_id>']) {
    stage('Init') {
        checkout scm
    }

    stage('Build') {
        sh 'mvn clean package'
    }

    stage('Publish') {
        
                                
        withCredentials([usernamePassword(credentialsId: 'azuresp', passwordVariable: 'AZURE_CLIENT_SECRET', usernameVariable: 'AZURE_CLIENT_ID')]) {
       azureFunctionAppPublish appName: 'javafndeploy', 
                                azureCredentialsId: 'azuresp', 
                                filePath: '**/*.json,**/*.jar,bin/*,HttpTrigger-Java/*', 
                                resourceGroup: 'Jen_rgp', 
                                sourceDirectory: 'target/azure-functions/odd-or-even-function-sample'
        
      }
    }
   }
}
