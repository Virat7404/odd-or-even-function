  
node {
 withEnv(['AZURE_SUBSCRIPTION_ID=92170e15-44be-43ac-b67d-8fd81b05b8f9',
        'AZURE_TENANT_ID=22fca6e7-362a-49c9-b252-691d5c333d98']) {
    stage('Init') {
        checkout scm
    }

    stage('Build') {
        sh 'mvn clean package'
    }

    stage('Publish') {
        
                                
        withCredentials([usernamePassword(credentialsId: 'azuresp', passwordVariable: 'AZURE_CLIENT_SECRET', usernameVariable: 'AZURE_CLIENT_ID')]) {
       azureFunctionAppPublish appName: 'javafndeploy', 
                                azureCredentialsId: 'azuresp', 
                                filePath: '**/*.json,**/*.jar,bin/*,HttpTrigger-Java/*', 
                                resourceGroup: 'Jen_rgp', 
                                sourceDirectory: 'target/azure-functions/odd-or-even-function-sample'
        
      }
    }
   }
}
